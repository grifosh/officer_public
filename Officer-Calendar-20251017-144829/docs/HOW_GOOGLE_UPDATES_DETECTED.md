# –ö–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –æ–±–Ω–æ–≤–∏–ª–æ—Å—å –≤ Google Calendar

## –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –æ–±–Ω–æ–≤–∏–ª–æ—Å—å –≤ Google Calendar —á–µ—Ä–µ–∑ –ø–æ–ª–µ `updated` –≤ JSON –æ—Ç–≤–µ—Ç–µ –æ—Ç Google Calendar API.**

## –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

### 1. üì° Google Calendar API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

–ö–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏–∑ Google Calendar API, –æ–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, –Ω–æ –∏ **–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π**:

```json
{
  "id": "28espib7ufh8nrbutr2h7nd312",
  "summary": "!!! 777 !!!",
  "created": "2025-10-13T16:22:20.000Z",    ‚Üê –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
  "updated": "2025-10-13T16:26:34.607Z",    ‚Üê –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è!
  "etag": "\"3520745589215678\"",           ‚Üê –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–µ—Ä—Å–∏–∏
  "sequence": 0,                            ‚Üê –ù–æ–º–µ—Ä –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  "start": { "dateTime": "2025-10-13T18:00:00+03:00" },
  "end": { "dateTime": "2025-10-13T18:30:00+03:00" }
}
```

### 2. üïê –ü–æ–ª–µ `updated` - –∫–ª—é—á–µ–≤–æ–µ –≤—Ä–µ–º—è

**–ü–æ–ª–µ `updated` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è –≤ Google Calendar:**

- **–§–æ—Ä–º–∞—Ç**: ISO 8601 —Å –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞–º–∏
- **–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å**: UTC (Z)
- **–ü—Ä–∏–º–µ—Ä**: `2025-10-13T16:26:34.607Z`
  - –î–∞—Ç–∞: 13 –æ–∫—Ç—è–±—Ä—è 2025
  - –í—Ä–µ–º—è: 16:26:34.607 UTC
  - –ú–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã: .607

### 3. üîÑ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤ –∫–æ–¥–µ

–í —Ñ—É–Ω–∫—Ü–∏–∏ `_process_event` —Å–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —ç—Ç–æ –≤—Ä–µ–º—è:

```python
processed_event = {
    'title': summary,
    'start_time': start_time.isoformat(),
    'end_time': end_time.isoformat(),
    'description': description,
    'location': location,
    'attendees': attendees,
    'source': 'google_calendar',
    'google_event_id': event.get('id'),
    'google_calendar_link': event.get('htmlLink', ''),
    'updated': event.get('updated')  # ‚Üê –í–û–¢ –≠–¢–û –í–†–ï–ú–Ø!
}
```

### 4. üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

–°–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è `updated` —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `last_local_update` | –ö–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ (—á–µ—Ä–µ–∑ UI) |
| `last_google_sync` | –ö–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å Google |
| `google_updated_at` | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ Google Calendar |

### 5. üéØ –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä (–≤–∞—à —Å–ª—É—á–∞–π)

**–°–æ–±—ã—Ç–∏–µ ID 624: "!!!TEST MEETING!!!" ‚Üí "!!! 777 !!!"**

```
–õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
‚Ä¢ last_local_update: null (–Ω–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)
‚Ä¢ last_google_sync: 2025-10-13T19:25:21
‚Ä¢ google_updated_at: 2025-10-13T16:24:08

Google Calendar –¥–∞–Ω–Ω—ã–µ:
‚Ä¢ updated: 2025-10-13T16:26:34.607Z

–ê–Ω–∞–ª–∏–∑:
‚Ä¢ Google –æ–±–Ω–æ–≤–∏–ª–æ—Å—å –≤ 16:26:34
‚Ä¢ –ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±—ã–ª–∞ –≤ 19:25:21
‚Ä¢ Google –æ–±–Ω–æ–≤–∏–ª–æ—Å—å –î–û –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚Ä¢ –ù–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ—Ç

–†–µ–∑—É–ª—å—Ç–∞—Ç: google_to_local ‚úÖ
```

### 6. üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

Google Calendar API —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- **`etag`**: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–µ—Ä—Å–∏–∏ —Å–æ–±—ã—Ç–∏—è
- **`sequence`**: –ù–æ–º–µ—Ä –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π (0 = –∏—Å—Ö–æ–¥–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- **`created`**: –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è

–≠—Ç–∏ –ø–æ–ª—è –ø–æ–º–æ–≥–∞—é—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å:
- –ë—ã–ª–æ –ª–∏ —Å–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ (etag –∏–∑–º–µ–Ω–∏–ª—Å—è)
- –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏–∑–º–µ–Ω—è–ª–æ—Å—å (sequence —É–≤–µ–ª–∏—á–∏–ª—Å—è)
- –ö–æ–≥–¥–∞ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ (created)

### 7. ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
2. **–ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–µ `updated`** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
3. **–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**
4. **–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
5. **–û–±–Ω–æ–≤–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î** –µ—Å–ª–∏ Google –Ω–æ–≤–µ–µ

### 8. üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

```python
# –í —Ñ—É–Ω–∫—Ü–∏–∏ get_today_events()
events_result = self.service.events().list(
    calendarId=calendar_id,
    timeMin=time_min,
    timeMax=time_max,
    singleEvents=True,
    orderBy='startTime'
).execute()

# –ö–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ 'updated'
for event in events_result.get('items', []):
    updated_time = event.get('updated')  # –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    # ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è
```

### 9. üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```
2025-10-13 19:27:47 | INFO | Google —Å–æ–±—ã—Ç–∏–µ: !!! 777 !!! | Google ID: 28espib7ufh8nrbutr2h7nd312
2025-10-13 19:27:47 | INFO | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: google_to_local
2025-10-13 19:27:47 | INFO | –ü—Ä–∏—á–∏–Ω–∞: Google —Å–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ, –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –æ–±–Ω–æ–≤–∏–ª–æ—Å—å –≤ Google Calendar —á–µ—Ä–µ–∑ –ø–æ–ª–µ `updated` –≤ JSON –æ—Ç–≤–µ—Ç–µ –æ—Ç Google Calendar API.** –≠—Ç–æ –ø–æ–ª–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601 —Å –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞–º–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–µ —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
